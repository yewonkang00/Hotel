<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="QNA">

	<select id="listAll" resultType="com.khotel.Vo.QnaVo">
		<!-- select QNACODE, QNATITLE, username, QNAWRITER, QNAREGISTERDATE, QNAVIEWCOUNT
		from qna q, member m
		where q.qnawriter = m.userid 
		order by QNACODE desc -->
		<include refid="paging_header" />
		select QNACODE, QNATITLE, QNAWRITER, QNAREGISTERDATE, QNAVIEWCOUNT
		from QNA
		order by QNACODE desc
		<include refid="paging-footer" />
	</select>

	<insert id="insert">
		insert into QNA (QNACODE, QNATITLE, QNACONTENT, QNAWRITER) values
		(seq_qna.nextval, #{title}, #{content}, #{name})
	</insert>

	<sql id="paging_header">
		select *
		from (
			select rownum as rn, A.*
			from (
	</sql>

	<sql id="paging-footer">
		) A
	) 
	where rn between ${start} and ${end}
	</sql>

	<update id="increaseViewcnt">
		update QNA
		set QNAVIEWCOUNT = QNAVIEWCOUNT+1
		where QNACODE= #{QNACODE}
	</update>

	 <select id="view" resultType = "com.khotel.Vo.QnaVo">
		select QNACODE, QNATITLE, QNACONTENT, QNAREGISTERDATE, QNAVIEWCOUNT, QNAWRITER
		from QNA
		where QNACODE = #{QNACODE}
	</select>

	<update id="updateArticle">
		update QNA
		set QNATITLE= #{QNATITLE}, QNACONTENT= #{QNACONTENT}
		where QNACODE = #{QNACODE}
	</update>

	<delete id="deleteArticle">
		delete from qna where QNACODE = #{QNACODE}
	</delete>

</mapper>